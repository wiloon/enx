<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Session Expiry Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .word {
            color: #1976d2;
            cursor: pointer;
            text-decoration: underline;
        }
        .word:hover {
            color: #1565c0;
        }
    </style>
</head>
<body>
    <h1>Session Expiry Test Page</h1>
    
    <div class="test-section">
        <h2>Test Instructions</h2>
        <p>This page is designed to test the session expiry handling in the ENX extension.</p>
        <ol>
            <li>Make sure the ENX extension is installed and you are logged in</li>
            <li>Click the ENX extension icon to enable it</li>
            <li>Click on any word below to test translation</li>
            <li>To test session expiry, you can manually expire your session on the server or wait for it to expire naturally</li>
            <li>Once session expires, clicking on words should show an error message instead of making API calls</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>Test Content</h2>
        <p>
            This is a <span class="word" alt="test">test</span> paragraph with several 
            <span class="word" alt="English">English</span> words that you can click on to test the 
            <span class="word" alt="translation">translation</span> functionality. 
            When your <span class="word" alt="session">session</span> expires, you should see an 
            <span class="word" alt="error">error</span> message instead of the translation.
        </p>
        
        <p>
            The <span class="word" alt="extension">extension</span> should handle session expiry gracefully by:
        </p>
        <ul>
            <li>Detecting 401 responses from the server</li>
            <li>Showing a notification to the user</li>
            <li>Preventing further API calls</li>
            <li>Displaying an error message in the popup</li>
            <li>Prompting the user to log in again</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>Expected Behavior</h2>
        <p><strong>Normal operation:</strong> Clicking on words should show translations in a popup.</p>
        <p><strong>After session expiry:</strong> Clicking on words should show "Session expired. Please log in again." in the popup.</p>
        <p><strong>Notification:</strong> You should also see a browser notification about the session expiry.</p>
    </div>

    <script>
        // Add click handlers for test words
        document.querySelectorAll('.word').forEach(word => {
            word.addEventListener('click', function(e) {
                // This will trigger the ENX extension's word click handler
                console.log('Word clicked:', this.getAttribute('alt'));
            });
        });
    </script>
</body>
</html> 